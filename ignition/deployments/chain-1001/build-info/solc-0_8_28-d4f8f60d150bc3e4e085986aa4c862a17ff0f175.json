{
  "_format": "hh3-sol-build-info-1",
  "id": "solc-0_8_28-d4f8f60d150bc3e4e085986aa4c862a17ff0f175",
  "solcVersion": "0.8.28",
  "solcLongVersion": "0.8.28+commit.7893614a",
  "userSourceNameMap": {
    "contracts/SurveyFactory.sol": "project/contracts/SurveyFactory.sol"
  },
  "input": {
    "language": "Solidity",
    "settings": {
      "evmVersion": "cancun",
      "optimizer": {
        "enabled": true,
        "runs": 200
      },
      "outputSelection": {
        "*": {
          "": [
            "ast"
          ],
          "*": [
            "abi",
            "evm.bytecode",
            "evm.deployedBytecode",
            "evm.methodIdentifiers",
            "metadata"
          ]
        }
      },
      "remappings": [],
      "viaIR": true
    },
    "sources": {
      "project/contracts/Survey.sol": {
        "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.28;\n\nstruct Question {\n  string question;\n  string[] options;\n}\nstruct Answer {\n  address respondent;\n  uint8[] answers;\n}\n\ncontract Survey {\n  string public title;\n  string public description;\n  uint256 public targetNumber;\n  uint256 public rewardAmount;\n  // Q\n  Question[] questions;\n  Answer[] answers;\n\n  constructor(\n    string memory _title,\n    string memory _description,\n    uint256 _targetNumber,\n    Question[] memory _questions\n  ) payable {\n    title = _title;\n    description = _description;\n    targetNumber = _targetNumber;\n    rewardAmount = msg.value / _targetNumber;\n    for (uint i = 0; i < _questions.length; i++) {\n      questions.push(\n        Question({\n          question: _questions[i].question,\n          options: _questions[i].options\n          //string array deepcopy is available\n        })\n      );\n      // Question storage q = questions.push();\n      // q.question = _quesetions[i].question;\n      // q.options = _questions[i].options;\n    }\n  }\n\n  function submitAnswer(Answer calldata _answer) external {\n    //length validation\n    require(\n      _answer.answers.length == questions.length,\n      \"Mismatched answers length\"\n    );\n    require(answers.length < targetNumber, \"This survey has been ended\"); // 10th submit ->answer.length = 9\n    answers.push(\n      Answer({respondent: _answer.respondent, answers: _answer.answers})\n    );\n    payable(msg.sender).transfer(rewardAmount);\n  }\n\n  function getAnswers() external view returns (Answer[] memory) {\n    return answers;\n  }\n\n  function getQuestion() external view returns (Question[] memory) {\n    return questions;\n  }\n}"
      },
      "project/contracts/SurveyFactory.sol": {
        "content": "// SPDX-License-Identifier: SEE LICENSE IN LICENSE\npragma solidity ^0.8.28;\n\nimport \"./Survey.sol\";\n\nstruct SurveySchema {\n  string title;\n  string description;\n  uint256 targetNumber;\n  Question[] questions;\n}\n\nevent SurveyCreated(address);\n\ncontract SurveyFactory {\n  uint256 public min_pool_amount;\n  uint256 public min_reward_amount;\n  Survey[] surveys;\n\n  constructor(uint256 _min_pool_amount, uint256 _min_reward_amount) {\n    min_pool_amount = _min_pool_amount;\n    min_reward_amount = _min_reward_amount;\n  }\n\n  function createSurvey(SurveySchema calldata _survey) external payable {\n    require(msg.value>=min_pool_amount, \"Insufficient pool amount\");\n    require(msg.value/_survey.targetNumber >= min_reward_amount, \"Insufficient reward amount\");\n    Survey survey = new Survey{value:msg.value}(\n      _survey.title,\n      _survey.description,\n      _survey.targetNumber,\n      _survey.questions\n    );\n    surveys.push(survey);\n    emit SurveyCreated(address(survey));\n  }\n\n  function getSurveys() external view returns (Survey[] memory) {\n    return surveys;\n  }\n}"
      }
    }
  }
}